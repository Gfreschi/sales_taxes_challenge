flowchart TD
    Input[ğŸ“„ Input<br/>File/STDIN] --> Parser[ğŸ“ InputParser<br/>Parse format]
    Parser --> Classifier[ğŸ” ProductClassifier<br/>Detect categories]

    Classifier --> Exempt{ğŸ“š Tax Exempt?<br/>book/food/medical}
    Classifier --> Import{ğŸŒ Imported?<br/>contains imported}

    Exempt -->|Yes| NoTax[âœ… 0% Tax]
    Exempt -->|No| BasicTax[ğŸ’° 10% Basic Tax]

    Import -->|Yes| ImportTax[ğŸš¢ 5% Import Duty]
    Import -->|No| Calculator[ğŸ§® TaxCalculator]

    NoTax --> Calculator
    BasicTax --> Calculator
    ImportTax --> Calculator

    Calculator --> Currency[ğŸ’µ Currency<br/>BigDecimal]
    Currency --> Round[ğŸ”„ Round Up<br/>ceil to $0.05]
    Round --> LineItem[ğŸ“‹ LineItem]
    LineItem --> Receipt[ğŸ§¾ Receipt<br/>Sales Taxes + Total]
    Receipt --> Output[ğŸ–¨ï¸ Final Receipt]

    classDef inputStyle fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef processStyle fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef decisionStyle fill:#fff9c4,stroke:#f9a825,stroke-width:2px
    classDef outputStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px

    class Input,Output inputStyle
    class Parser,Classifier,Calculator,Currency,Round,LineItem,Receipt processStyle
    class Exempt,Import decisionStyle